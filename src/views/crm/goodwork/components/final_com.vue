<template>
    <div class="collect-wrap">
        <el-form :model="finalForm" ref="colForm" class="demo-ruleForm">
            <div class="collect-wrapbox" v-for="item in finalForm.projectDocList" :key="item.firstCatagoryId">
                <div class="collect-title">{{item.firstCatagoryName}}</div>
                <template v-for="obj in item.respRiskCheckDocTemplateList">
                    <el-form-item label="" prop="type" :key="'item'+obj.templateId">
                        <div class="collect-box">
                            <el-checkbox label="" name="type" size="medium" v-model="obj.callback"></el-checkbox>
                            <div class="collect-boxtxt">
                                <h3>{{obj.secondCatagoryName}}</h3>
                                <p>备注：{{obj.remark}}</p>
                                <p>规定格式：{{obj.formatName}}</p>
                            </div>
                        </div>
                        <div class="upload-file_list" v-for="(item,index) in dd" :key="index">
                            <p>
                                <span class="posrtv">
                                    <template v-if="item&&item.fileUrl">
                                        <i class="el-icon-document"></i>
                                        <a :href="item.fileUrl" target="_blank">
                                            <font>{{item.fileName}}</font>
                                        </a>
                                    </template>
                                </span>
                            </p>
                            <p style="flex:0.5">{{item.date}}</p>
                            <p>
                                <font class="fileItemDownLoad" @click="onDelete">删除</font>
                                <!-- <font class="fileItemDownLoad" v-if="item.fileName.toLowerCase().indexOf('.png') != -1||item.fileName.toLowerCase().indexOf('.jpg') != -1||item.fileName.toLowerCase().indexOf('.jpeg') != -1" @click="handleImgDownload(item.fileUrl, item.fileName)">下载</font> -->
                                <a class="fileItemDownLoad" :href="item.fileUrl+'?response-content-type=application/octet-stream'" :download="item.fileName"
                                    v-if="item.fileName.toLowerCase().indexOf('.png') != -1||item.fileName.toLowerCase().indexOf('.jpg') != -1||item.fileName.toLowerCase().indexOf('.jpeg') != -1">
                                    下载
                                </a>
                                <font v-else><a class='fileItemDownLoad' :href="item.fileUrl" target='_blank'>下载</a></font>
                            </p>
                        </div>
                        <hosjoyUpload v-model="fileList" :showPreView=false :fileSize='200' :fileNum='15' :action='action' :uploadParameters='uploadParameters' @successCb="onSuccessCb()" style="margin-top:10px">
                            <el-button type="primary">上 传</el-button>
                        </hosjoyUpload>
                    </el-form-item>
                </template>
            </div>
        </el-form>
    </div>
</template>
<script>
import hosjoyUpload from '@/components/HosJoyUpload/HosJoyUpload'
import { interfaceUrl } from '@/api/config'
import { handleImgDownload } from '../../projectInformation/utils'
export default {
    props: {
        finalForm: {
            type: Object,
            default: () => { }
        }
    },
    components: {
        hosjoyUpload
    },
    data () {
        return {
            handleImgDownload,
            dd: [{
                fileUrl: 'https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg',
                fileName: 'asd.jpeg'
            }],
            colForm: {},
            action: interfaceUrl + 'tms/files/upload',
            uploadParameters: {
                updateUid: '',
                reservedName: true
            },
            fileList: []
        }
    },
    methods: {
        onDelete () {

        }
    }
}
</script>
<style lang="scss" scoped>
.collect-wrap {
    padding: 0 10px 100px 10px;
}
.collect-title {
    font-size: 20px;
    color: #ff7a45;
    border-bottom: 1px solid #e5e5e5;
    margin-top: 10px;
}
.collect-box {
    display: flex;
    .el-checkbox {
        margin-right: 10px;
    }
}
.collect-wrapbox {
    margin-left: 20px;
}
.upload-file_list {
    display: flex;
}
.fileItemDownLoad {
    font-size: 12px;
    border-radius: 3px;
    padding: 8px 16px;
    color: #fff;
    background-color: #ff7a45;
    border-color: #ff7a45;
    display: block;
    line-height: 13px;
    float: left;
    height: 13px;
    cursor: pointer;
    margin-left: 10px;
}
.posrtv {
    position: relative;
    color: #ff7a45;
    a {
        color: #ff7a45;
        margin-left: 10px;
    }
    font {
        font-size: 14px;
    }
}
</style>